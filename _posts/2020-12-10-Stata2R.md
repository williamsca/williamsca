---
layout: post
title: Translating Stata to R
categories: Economics
tags: ['Stata', 'R', 'programming']
---

My first choice language is Stata. Compared with SAS, R, or Python, it
is incredibly straightforward to use for routine data cleaning
tasks. However, for larger datasets or more complicated operations,
I've found R to be a superior choice. I've listed some common Stata
commands and their equivalent in R (working with a data.table) below
as a quick reference.

## Importing and renaming

```stata
clear all

global dir = "[PATH]"

import delimited using "$dir/[FILE].csv", clear varnames(1)

rename (old1 old2) (new1 new2)
```

```R
rm(list = ls()) 

pacman::p_load(data.table)

dir <- "[PATH]"

dt <- fread(paste(dir, "[FILE].csv", sep = ""))

setnames(dt, c("old1", "old2"), c("new1", "new2"))
```

## Column operations

```stata
gen var1 = 5

drop var1 var2

keep var1 var2
```

```R
dt[, var1 := 5]

dt[, c("var1", "var2") := NULL]

dt <- dt[, c("var1", "var2")]
```

## Row operations

```stata
keep if var1 != 0

keep if inlist(var1, "str1", "str2")

replace var1 = 2 if var2 == "Y"

replace var1 = subinstr(var1, "/", "", .)

sort var1 var2
```

```R
dt <- dt[var1 != 0]

list <- c("str1", "str2")
dt <- dt[var1 %in% list]

dt[var2 == "Y", var1 := 2]

dt[grep("/", var1), var1 := gsub("/", "", var1)]

setorder(dt, var1, var2)
```

## Operations by group
